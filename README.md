# My DS/ML way

- ### **Статистика**
	- **Генеральная совокупность** – множество всех объектов, относительно которых делаются выводы в рамках исследования.

	- **Выборка** – часть генеральной совокупности элементов, которая охватывается экспериментом (наблюдением, опросом).
		Виды выборок:
		- **Простая случайная выборка** (simple random sample) - случайный выбор элементов из генеральной совокупности.
		- **Стратифицированная выборка** (stratified sample) - совокупность сначала разбивается по какому-то признаку на страты, а из них элементы выбираются случайно.
		- **Групповая выборка** (claster sample) - Совокупность разделяется на кластеры, внутри которых нет заметной разницы между элементами, затем для анализа выбираются несколько кластеров и из них случайным образом извлекаются элементы.

	- **Типы переменных**:
		- **Непрерывные** ([0; 1]);
		- **Дискретные** (1, 2,..).
		- **Номинативные** (categorical) – разделение на группы (1=м, 2=ж).
		- **Ранговые** (ordinal) – операции сравнения (распределение мест в забеге).

	- **Меры центральной тенденции** - число, служащее для описания множества значений одним-единственным числом (для краткости).
		- **Мода** (mode) – значение признака, котороые встречается максимально часто.
		- **Медиана** (median) – значение признака, которое делит упорядоченное множество данных пополам.
		- **Среднее значение** (mean) – сумма всех значений признака, деленная на количество измеренных значений.
		- **Усеченное среднее** - арифметическое среднее после удаления установленного (исследователем) процента наибольших и наименьших значений.
		- **Унимодальность** - распределение, имеющее только одну моду (частое значение)

		    Свойства среднего:
		    1. Среднее арифметическое константы есть константа – Мс = с.
			2. Если все варианты увеличить (уменьшить) в kраз, то и среднее арифметическое увеличится (уменьшится) в k раз.
			3. Если все варианты увеличить (уменьшить) на одно и то же число, то среднее арифметическое увеличится (уменьшится) на то же число

	- **Меры изменчивости** - статистические показатели, характеризующие различия между отдельными значениями выборки
		- **Размах** (range) – разность максимального и минимального значения.
		- **Дисперсия** (variance) – средний квадрат отклонений индивидуальных значений признака от их средней величины.
		- **Среднеквадратическое отклонение** (standard deviation, стандартное отклонение) – среднее отклонение индивидуальных значений признака от их средней величины.

		    Свойства дисперсии и стандартного отклонения:
			1. Если к каждому элементу выборки прибавить/вычесть константу, дисперсия и стандартное отклонение не изменяться.
			2. Если каждый элемент выборки домножить на константу, то значение дисперсии домножиться на константу в квадрате, а стандартное отклонение на константу.

	- **Квантили распределения**
		- **Квантиль** – значение, которое заданная случайная величина не превышает с фиксированной вероятностью:
		- **Квартили** – три значения признака, которые делят упорядоченное множество данных на четыре равные части.
		- **IQR** - межквартильный размах - разница между первым и третьим квартилем
		- **Выбросы** - значения, отстающие от первого или третьего квартиля более чем на 1.5 IQR

	- **Нормальное распределение** – унимодально, симметрично, отконения наблюдений от среднего подчиняются определенному вероятностному закону:
		- в пределах одного стандартного отклонения: 68%
		- в пределах двух стандартных отклонений: 95%
		- в пределах трёх стандартных отклонений: 99.72%

	- **Стандартизация** (Z-преобразование) – преобразование полученных данных в стандартную Z-шкалу с средним 0 и дисперсией 1

	- **Центра́льные преде́льные теоре́мы** (ЦПТ) — сумма достаточно большого количества слабо зависимых случайных величин, имеющих примерно одинаковые масштабы (ни одно из слагаемых не доминирует, не вносит в сумму определяющего вклада), имеет распределение, близкое к нормальному. [Приложение](https://gallery.shinyapps.io/CLT_mean/)

	- **Стандартная ошибка среднего** - статистический параметр, частное от деления стандартного отклонения выборочного среднего на размер выборки из генеральной совокупности

	- **Доверительный интервал** - интервал, построенный с помощью случайной выборки из распределения с неизвестным параметром, такой, что он содержит данный параметр с заданной вероятностью.

	- **Нулевая гипотеза**  – отсутствие значимых различий между средним значением выборки и средним значением генеральной совокупности.
	- **Альтернативная гипотеза** – значимое отклонение между средним значением выборки и средним значением генеральной совокупности.
	- **p-value** (уровень значимости) – вероятность получения такого или еще более сильного отклонения от среднего значения, если верна нулевая гипотеза. Чем меньше p-value, тем больше оснований отклонить нулевую гипотезу. Обычно при p < 0.05 принимаем альтернативную гипотезу, т.е. мы получили статистически значимое отклонение. [Пример](https://gallery.shinyapps.io/dist_calc/)
	- **Ошибка 1 рода** – приняли альтернативную гипотезу, хотя верна нулевая.
	- **Ошибка 2 рода** – приняли нулевую гипотезу, хотя верна альтернативная.
	
	- **Латентная (скрытая) переменная** - такие переменные, которые не могут быть измерены в явном виде, а могут быть только выведены через математические модели с использованием наблюдаемых переменных.

- ### **KNN - метод ближайщих соседей**

	1. Для каждого наблюдения найти К наиоблее похожих наблюдений из обучающей выборки
	2. Для классификации:
		- Получить мажоритарный класс среди выбранных записей и назначить его наблюдению
	3. Для регрессии (KNN-регрессия):
		- Найти среди выбранных записей среднее значение зависимой переменной и назначить его для наблюдения

	**Метрические показатели расстояния** - метрические показатели, которые обобщают в одном числе, насколько далеко одна запись находится от другой.

	Показатель К, обычно, подбирается путём кросс-валидации на тренировочных данных.

	Для нахождения расстояния между объектами обычно используется либо евклидово расстояние (корень квадратный из суммы разностей квадратов признаков) или манхэттенское расстояние (модуль разности признаков)


	В общем случае используется формула Минковского:
	
	<p align="center">
		<img width="300" height="150" src = "https://render.githubusercontent.com/render/math?math=\rho(x,%20y)%20=%20(\sum^n_{i=1}%20\left|x_i%20-%20y_i\right|^p)^{1/p}">
	</p>
	
	Метод KNN часто используется как первый в пайплайне обучения модели. На основе модели KNN создаётся признак, который выдаёт какие-то вероятности независимой переменной и этот признак уже далее используется в других моделях (не KNN)

	```r
	library(FNN)
	library(dplyr)
	set.seed(42)
	data <- as.data.frame(iris)
	
	z_score <- function(x){
	  x <- (x - mean(x, na.rm = TRUE)) / sd(x, na.rm = TRUE)
	  x
	}

	data <- data %>% 
	  mutate_if(is.numeric, z_score) %>% 
	  mutate(Species = ifelse(Species == 'setosa', 1, 
	                          ifelse(Species == 'versicolor', 2, 3)))

	train <- sample(seq(1:150), 120, replace = FALSE)
	test <- setdiff(seq(1:150), train)

	train_df <- data[train, -5]
	cl <- data[train, 5]
	test_df <- data[test, -5]

	knn_cl <- knn(train = train_df,
	               test = test_df,
	               cl = cl,
	               k = 5)

	cbind(data[test, 5], knn_cl)
	```
